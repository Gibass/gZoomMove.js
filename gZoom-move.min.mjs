var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return(e=r(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function a(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function r(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}t.d(e,{A:()=>l});var h={scale:{min:.1,max:4},controls:{zoomIn:!1,zoomOut:!1,reset:!1},zoom:!0,move:!0},l=function(){return t=function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elt=e,this.options=o(o({},h),s),this.elt&&this.initZooming()},(e=[{key:"initZooming",value:function(){this.initEltParams(),this.touchEvent(),this.disableDocumentZoom(),this.mouseEvent(),this.controlEvent()}},{key:"initEltParams",value:function(){this.drag=!1,this.isHover=!1,this.start={scale:1,middle:{x:this.elt.offsetWidth/2,y:this.elt.offsetHeight/2}},this.state={x:0,y:0,width:this.elt.offsetWidth,height:this.elt.offsetHeight,scale:1,distance:0,delta:{x:0,y:0}},this.parent=this.elt.parentNode}},{key:"touchEvent",value:function(){var t=this;this.parent.addEventListener("touchstart",(function(e){return t.handleTouchstart(e)})),this.parent.addEventListener("touchmove",(function(e){return t.handleTouchMove(e)})),this.parent.addEventListener("touchend",(function(e){return t.handleTouchEnd(e)}))}},{key:"mouseEvent",value:function(){var t=this;this.options.zoom&&this.parent.addEventListener("wheel",(function(e){return t.handleWheel(e)})),this.options.move&&this.parent.addEventListener("mousedown",(function(e){return t.handleMouseDown(e)})),this.options.move&&this.parent.addEventListener("mousemove",(function(e){return t.handleMouseMove(e)})),this.options.move&&this.parent.addEventListener("mouseup",(function(){return t.handleMouseCancel()})),this.options.move&&this.parent.addEventListener("mouseleave",(function(){return t.handleMouseCancel()})),this.elt.addEventListener("mouseover",(function(){t.isHover=!0}),!1),this.elt.addEventListener("mouseleave",(function(){t.isHover=!1}),!1)}},{key:"controlEvent",value:function(){var t=this;this.options.zoom&&this.options.controls.zoomIn&&this.options.controls.zoomIn.addEventListener("click",(function(e){return t.controlZoom(e,.5)})),this.options.zoom&&this.options.controls.zoomOut&&this.options.controls.zoomOut.addEventListener("click",(function(e){return t.controlZoom(e,-.5)})),this.options.controls.reset&&this.options.controls.reset.addEventListener("click",(function(e){e.preventDefault(),t.reset()}))}},{key:"handleWheel",value:function(t){t.cancelable&&t.preventDefault(),this.start.middle.x=t.clientX-this.elt.offsetLeft,this.start.middle.y=t.clientY-this.elt.offsetTop,this.zoom(-t.deltaY/1e3)}},{key:"handleMouseDown",value:function(t){t.preventDefault(),this.drag=!0,this.tempCoord={x:t.clientX,y:t.clientY},this.start.x=this.state.x,this.start.y=this.state.y,this.deltaStart={x:this.state.delta.x,y:this.state.delta.y}}},{key:"handleMouseMove",value:function(t){t.preventDefault(),this.drag&&(this.state.x=this.start.x+(t.clientX-this.tempCoord.x),this.state.y=this.start.y+(t.clientY-this.tempCoord.y),this.state.delta.x=this.deltaStart.x-(t.clientX-this.tempCoord.x),this.state.delta.y=this.deltaStart.y-(t.clientY-this.tempCoord.y),this.render())}},{key:"handleMouseCancel",value:function(){this.drag=!1,this.tempCoord={x:0,y:0}}},{key:"handleTouchstart",value:function(t){this.options.move&&1===t.touches.length&&(this.drag=!0,this.start.x=this.state.x,this.start.y=this.state.y,this.deltaStart={x:this.state.delta.x,y:this.state.delta.y},this.tempCoord={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}),this.options.zoom&&2===t.touches.length&&(this.start.scale=this.state.scale,this.start.distance=this.distance(t),this.start.middle.x=(t.touches[0].clientX-this.elt.offsetLeft+t.touches[1].clientX-2*this.elt.offsetLeft)/2,this.start.middle.y=(t.touches[0].clientY-this.elt.offsetTop+t.touches[1].clientY-2*this.elt.offsetTop)/2)}},{key:"handleTouchMove",value:function(t){if(t.cancelable&&(this.options.move||this.options.zoom)&&t.preventDefault(),this.options.move&&this.drag&&1===t.touches.length&&(this.state.x=this.start.x+(t.changedTouches[0].clientX-this.tempCoord.x),this.state.y=this.start.y+(t.changedTouches[0].clientY-this.tempCoord.y),this.state.delta.x=this.deltaStart.x-(t.changedTouches[0].clientX-this.tempCoord.x),this.state.delta.y=this.deltaStart.y-(t.changedTouches[0].clientY-this.tempCoord.y),this.render()),this.options.zoom&&2===t.touches.length){var e=this.distance(t)/this.start.distance;this.state.scale=this.start.scale*Math.min(Math.max(.12,e),4),this.reAdapt(),this.render()}}},{key:"handleTouchEnd",value:function(t){1===t.touches.length&&(this.drag=!1,this.tempCoord={x:0,y:0})}},{key:"disableDocumentZoom",value:function(){var t=this;document.addEventListener("wheel",(function(e){e.ctrlKey&&t.isHover&&e.preventDefault()}),{passive:!1})}},{key:"reAdapt",value:function(){var t=this.elt.offsetWidth*this.state.scale/this.state.width-1,e=(this.elt.offsetWidth*this.state.scale-this.state.width)/2,s=(this.elt.offsetHeight*this.state.scale-this.state.height)/2;this.state.x+=e-(this.start.middle.x+this.state.delta.x)*t,this.state.y+=s-(this.start.middle.y+this.state.delta.y)*t,this.state.delta.x+=(this.start.middle.x+this.state.delta.x)*t,this.state.delta.y+=(this.start.middle.y+this.state.delta.y)*t,this.state.width=this.elt.offsetWidth*this.state.scale,this.state.height=this.elt.offsetHeight*this.state.scale}},{key:"render",value:function(){this.elt.style.transform="translate(".concat(this.state.x,"px, ").concat(this.state.y,"px) scale(").concat(this.state.scale,")")}},{key:"distance",value:function(t){return Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY)}},{key:"controlZoom",value:function(t,e){t.preventDefault(),this.start.middle.x=this.elt.offsetWidth/2,this.start.middle.y=this.elt.offsetHeight/2,this.zoom(e)}},{key:"zoom",value:function(t){this.state.scale+=t;var e=this.options.scale.min?this.options.scale.min:.1,s=this.options.scale.max?this.options.scale.max:Number.MAX_SAFE_INTEGER;this.state.scale=Math.min(Math.max(e,this.state.scale),s),this.reAdapt(),this.render()}},{key:"reset",value:function(){this.initEltParams(),this.reAdapt(),this.render()}}])&&a(t.prototype,e),s&&a(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,s}(),c=e.A;export{c as default};